<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/testSchema.xsd">
    <test name="CreateSimpleProductTest">
        <annotations>
            <features value="Catalog"/>
            <stories value="Create Product"/>
            <title value="Admin should be able to create simple product."/>
            <description value="Admin should be able to create simple product."/>
            <severity value="MAJOR"/>
            <group value="Catalog"/>
            <group value="alex" />
        </annotations>
        <before>
            <!-- Login to Admin panel -->
            <actionGroup ref="LoginAsAdmin" stepKey="loginToAdminPanel" />
        </before>
        <after>
            <!-- Logout from Admin panel -->
        </after>

        <!-- Navigate to Catalog -> Products page (or just open by link) -->
        <amOnPage url="{{AdminProductIndexPage.url}}" stepKey="openProductGridPage" />

        <!-- Click "Add Product" button -->
        <click selector="{{AdminProductGridActionSection.addProductBtn}}" stepKey="clickAddProductButton" />
        <waitForPageLoad stepKey="waitForNewProductPageOpened" />

        <!-- Fill field "Name" with "Simple Product %unique_value%" -->
        <fillField selector="{{AdminProductFormSection.productName}}" userInput="{{_defaultProduct.name}}" stepKey="fillNameField" />

        <!-- Fill field "SKU" with "simple_product_%unique_value%" -->
        <fillField selector="{{AdminProductFormSection.productSku}}" userInput="{{_defaultProduct.sku}}" stepKey="fillSKUField" />

        <!-- Fill field "Price" with "500.00" -->
        <fillField selector="{{AdminProductFormSection.productPrice}}" userInput="{{_defaultProduct.price}}" stepKey="fillPriceField" />

        <!-- Fill field "Quantity" with "100" -->
        <fillField selector="{{AdminProductFormSection.productQuantity}}" userInput="{{_defaultProduct.quantity}}" stepKey="fillQtyField" />

        <!-- Fill field "Weight" with "100" -->
        <fillField selector="{{AdminProductFormSection.productWeight}}" userInput="{{_defaultProduct.weight}}" stepKey="fillWeightField" />

        <!-- Click "Save" button -->
        <click selector="{{AdminProductFormSection.save}}" stepKey="clickSaveButton" />
        <waitForPageLoad stepKey="waitForProductIsSaved" />
        <!-- See success save message "You saved the product." -->
        <see selector="{{AdminMessagesSection.success}}" userInput="You saved the product." stepKey="seeSuccessMessage" />

        <!-- Navigate to Catalog -> Products page (or just open by link) -->
        <amOnPage url="{{AdminProductIndexPage.url}}" stepKey="openProductGridPageToVerifySavedProduct" />

        <!-- See created product is in grid -->
        <click selector="{{AdminProductGridFilterSection.filters}}" stepKey="clickFiltersButton" />

        <!-- See "Name" in grid is valid -->
        <fillField selector="{{AdminProductGridFilterSection.nameFilter}}" userInput="{{_defaultProduct.name}}" stepKey="fillNameFilterField" />

        <!-- See "SKU" in grid is valid -->
        <fillField selector="{{AdminProductGridFilterSection.skuFilter}}" userInput="{{_defaultProduct.sku}}" stepKey="fillSkuFilterField" />

        <!-- See "Price" in grid is valid -->
        <fillField selector="{{AdminProductGridFilterSection.priceFilterFrom}}" userInput="{{_defaultProduct.price}}" stepKey="fillPriceFromFilterField" />
        <fillField selector="{{AdminProductGridFilterSection.priceFilterTo}}" userInput="{{_defaultProduct.price}}" stepKey="fillPriceToFilterField" />

        <!-- See "Quantity" in grid is valid -->
        <fillField selector="{{AdminProductGridFilterSection.quantityFrom}}" userInput="{{_defaultProduct.quantity}}" stepKey="fillQtyFromFilterField" />
        <fillField selector="{{AdminProductGridFilterSection.quantityTo}}" userInput="{{_defaultProduct.quantity}}" stepKey="fillQtyToFilterField" />

        <click selector="{{AdminProductGridFilterSection.applyFilters}}" stepKey="clickApplyFilterButton" />
        <waitForPageLoad stepKey="waitForFiltersApplied" />

        <dontSee selector="{{AdminDataGridTableSection.dataGridEmpty}}" userInput="We couldn't find any records." stepKey="dontSeeCouldntFindMessage" />

        <!-- Open Storefront Product Page and verify "Name", "SKU", "Price" -->
        <amOnPage url="{{_defaultProduct.name}}.html" stepKey="openProductOnStorefront" />
        <see selector="{{StorefrontProductInfoMainSection.productName}}" userInput="{{_defaultProduct.name}}" stepKey="seeProductName" />
        <see selector="{{StorefrontProductInfoMainSection.productSku}}" userInput="{{_defaultProduct.sku}}" stepKey="seeProductSku" />
        <see selector="{{StorefrontProductInfoMainSection.productPrice}}" userInput="${{_defaultProduct.price}}" stepKey="seeProductPrice" />
    </test>
</tests>
